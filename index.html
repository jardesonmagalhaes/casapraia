<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VALNEI ASSIS - Porcelanataria</title>
  <style>
    :root {
      --primary: #008080;
      --secondary: #f4f4f4;
      --accent: #ffd700;
      --danger: #e74c3c;
      --success: #27ae60;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: var(--secondary);
      color: #333;
    }
    header {
      background: var(--primary);
      color: #fff;
      text-align: center;
      padding: 2rem 1rem 1rem 1rem;
    }
    main {
      max-width: 900px;
      margin: 2rem auto;
      padding: 1rem;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.03);
    }
    section {
      margin-bottom: 2rem;
    }
    h2 {
      color: var(--primary);
    }
    form {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    form input, form select, form button {
      padding: 0.6rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
      min-width: 140px;
    }
    form button {
      background: var(--primary);
      color: #fff;
      border: none;
      cursor: pointer;
    }
    form button:hover {
      background: var(--accent);
      color: #333;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      padding: 0.6rem;
      border-bottom: 1px solid #eee;
      text-align: left;
    }
    tr:nth-child(even) {
      background: #fafafa;
    }
    .status-pendente {
      color: var(--danger);
      font-weight: bold;
    }
    .status-feito {
      color: var(--success);
      font-weight: bold;
    }
    .action-btn {
      background: var(--accent);
      border: none;
      padding: 0.3rem 0.6rem;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 0.4rem;
      font-size: 0.95rem;
    }
    .action-btn.feito {
      background: var(--success);
      color: #fff;
    }
    .action-btn.excluir {
      background: var(--danger);
      color: #fff;
    }
    #financeiro div {
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }
    #gastoList {
      list-style: none;
      padding: 0;
    }
    #gastoList li {
      background: #eee;
      margin-bottom: 5px;
      padding: 0.5rem;
      border-radius: 3px;
    }
    footer {
      text-align: center;
      padding: 1rem;
      background: var(--primary);
      color: #fff;
      margin-top: 2rem;
    }
    @media (max-width: 700px) {
      main {
        max-width: 98vw;
        padding: 0.5rem;
      }
      form {
        flex-direction: column;
        gap: 0.5rem;
      }
      table, th, td {
        font-size: 0.95rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>VALNEI ASSIS</h1>
    <p>Porcelanataria | Gestão de Serviços</p>
  </header>
  <main>
    <section id="agendamento">
      <h2>Agendar Serviço</h2>
      <form id="serviceForm">
        <input type="text" name="cliente" placeholder="Nome do Cliente" required />
        <input type="tel" name="telefone" placeholder="Telefone" required />
        <input type="text" name="servico" placeholder="Serviço" required />
        <input type="number" name="valor" placeholder="Valor (R$)" required />
        <input type="date" name="data" required />
        <select name="status">
          <option value="pendente">Pendente</option>
          <option value="feito">Feito</option>
        </select>
        <button type="submit">Adicionar</button>
      </form>
    </section>
    <section id="servicos">
      <h2>Serviços Agendados</h2>
      <table>
        <thead>
          <tr>
            <th>Cliente</th>
            <th>Telefone</th>
            <th>Serviço</th>
            <th>Valor</th>
            <th>Data</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody id="serviceList"></tbody>
      </table>
    </section>
    <section id="financeiro">
      <h2>Painel Financeiro</h2>
      <div>
        <p>Total a Receber: <span id="totalReceber">R$ 0,00</span></p>
        <p>Total Recebido: <span id="totalRecebido">R$ 0,00</span></p>
        <p>Gastos: <span id="totalGastos">R$ 0,00</span></p>
        <p>Saldo: <span id="saldo">R$ 0,00</span></p>
      </div>
      <form id="gastoForm">
        <input type="text" name="descricao" placeholder="Descrição do gasto" required />
        <input type="number" name="valor" placeholder="Valor (R$)" required />
        <button type="submit">Registrar Gasto</button>
      </form>
      <ul id="gastoList"></ul>
    </section>
  </main>
  <footer>
    <p>&copy; 2025 VALNEI ASSIS - Porcelanataria</p>
  </footer>
  <script>
    // Funções de LocalStorage
    function getServices() {
      return JSON.parse(localStorage.getItem('services') || '[]');
    }
    function setServices(services) {
      localStorage.setItem('services', JSON.stringify(services));
    }
    function getGastos() {
      return JSON.parse(localStorage.getItem('gastos') || '[]');
    }
    function setGastos(gastos) {
      localStorage.setItem('gastos', JSON.stringify(gastos));
    }
    // Adicionar Serviço
    document.getElementById('serviceForm').onsubmit = function(e) {
      e.preventDefault();
      let form = e.target;
      let service = {
        cliente: form.cliente.value,
        telefone: form.telefone.value,
        servico: form.servico.value,
        valor: parseFloat(form.valor.value),
        data: form.data.value,
        status: form.status.value
      };
      let services = getServices();
      services.push(service);
      setServices(services);
      form.reset();
      renderServices();
      updateFinanceiro();
    };
    // Renderizar Serviços
    function renderServices() {
      let services = getServices();
      let tbody = document.getElementById('serviceList');
      tbody.innerHTML = '';
      services.forEach((s, i) => {
        let tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${s.cliente}</td>
          <td>${s.telefone}</td>
          <td>${s.servico}</td>
          <td>R$ ${s.valor.toFixed(2)}</td>
          <td>${s.data}</td>
          <td class="status-${s.status}">${s.status.charAt(0).toUpperCase() + s.status.slice(1)}</td>
          <td>
            <button class="action-btn feito" onclick="marcarFeito(${i})" title="Marcar como Feito">Feito</button>
            <button class="action-btn excluir" onclick="excluirServico(${i})" title="Excluir">Excluir</button>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }
    // Marcar como Feito
    window.marcarFeito = function(i) {
      let services = getServices();
      services[i].status = 'feito';
      setServices(services);
      renderServices();
      updateFinanceiro();
    };
    // Excluir Serviço
    window.excluirServico = function(i) {
      let services = getServices();
      services.splice(i, 1);
      setServices(services);
      renderServices();
      updateFinanceiro();
    };
    // Adicionar Gasto
    document.getElementById('gastoForm').onsubmit = function(e) {
      e.preventDefault();
      let form = e.target;
      let gasto = {
        descricao: form.descricao.value,
        valor: parseFloat(form.valor.value)
      };
      let gastos = getGastos();
      gastos.push(gasto);
      setGastos(gastos);
      form.reset();
      renderGastos();
      updateFinanceiro();
    };
    // Renderizar Gastos
    function renderGastos() {
      let gastos = getGastos();
      let ul = document.getElementById('gastoList');
      ul.innerHTML = '';
      gastos.forEach((g, i) => {
        let li = document.createElement('li');
        li.textContent = `${g.descricao}: R$ ${g.valor.toFixed(2)}`;
        ul.appendChild(li);
      });
    }
    // Atualizar Painel Financeiro
    function updateFinanceiro() {
      let services = getServices();
      let gastos = getGastos();
      let totalReceber = services.filter(s => s.status === 'pendente').reduce((acc, s) => acc + s.valor, 0);
      let totalRecebido = services.filter(s => s.status === 'feito').reduce((acc, s) => acc + s.valor, 0);
      let totalGastos = gastos.reduce((acc, g) => acc + g.valor, 0);
      let saldo = totalRecebido - totalGastos;
      document.getElementById('totalReceber').textContent = 'R$ ' + totalReceber.toFixed(2);
      document.getElementById('totalRecebido').textContent = 'R$ ' + totalRecebido.toFixed(2);
      document.getElementById('totalGastos').textContent = 'R$ ' + totalGastos.toFixed(2);
      document.getElementById('saldo').textContent = 'R$ ' + saldo.toFixed(2);
    }
    // Inicialização
    window.onload = function() {
      renderServices();
      renderGastos();
      updateFinanceiro();
    };
  </script>
</body>
</html>